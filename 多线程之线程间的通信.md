# 多线程之线程间的通信

在Java中线程间的通信主要有利用volatile,synchronized对共享变量间的通信，wait,notify之间通信，管道通信。

## volatile,synchronized通信

vplatile修饰的变量可以保证内存可见性，当一个线程对该变量执行了操作后会立刻对其他线程可见，通过对变量的操作类进行隐式通信。例如懒汉式单例中。

synchronized锁修饰的方法或代码块可以保证一个时间内只有一条线程可以执行操作，其他线程需要等待当前线程释放后才能进入锁内执行，也可以是隐式的通信。

## wait/notify

Java中使用最多的通信方式为wait,notify方式。一个线程去设置条件，然后调用对象的wait进行等待，而另一条线程则当满足条件后进行操作，然后唤醒等待的线程。两个线程之间通过对象来进行通信，对象类似于一个开关，给对方一个提示。

此种方式很是类似于生产者/消费者模式，经典范式为：

等待者：

获取对象锁；

如果不符合条件，则进行等待wait，并且被唤醒时需要对条件进行再次判断。

符合条件则执行。

生产者：

获取对象锁；

修改条件；

唤醒等待在该对象上的线程。

## 管道通信

PipedInputStream,PipedOutputStream为针对字节；

PipedIWriter,PipedReader则是针对字符。

两个管道之间需要进行连接才能将数据进行流通，out.connect(in);



























